model Review {
  id        String   @id @default(cuid())
  orderId   String   @unique
  serviceId String
  authorId  String
  masterId  String?
  rating    Int // Оценка от 1 до 5
  comment   String? // Текст отзыва
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  order   Order   @relation(fields: [orderId], references: [id], onDelete: Cascade)
  service Service @relation(fields: [serviceId], references: [id], onDelete: Cascade)
  author  User    @relation("ReviewAuthor", fields: [authorId], references: [id], onDelete: Cascade)
  master  User?   @relation("ReviewMaster", fields: [masterId], references: [id], onDelete: SetNull)

  @@index([serviceId])
  @@index([masterId])
  @@index([authorId])
  @@index([rating])
  @@map("reviews")
}

