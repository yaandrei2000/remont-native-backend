enum ReferralStatus {
  PENDING
  COMPLETED
}

model Referral {
  id          String         @id @default(cuid())
  referrerId  String
  referredId  String         @unique
  points      Int            @default(0)
  status      ReferralStatus @default(PENDING)
  completedAt DateTime?
  createdAt   DateTime       @default(now())
  updatedAt   DateTime       @updatedAt

  referrer User @relation("Referrer", fields: [referrerId], references: [id], onDelete: Cascade)
  referred User @relation("Referred", fields: [referredId], references: [id], onDelete: Cascade)

  @@index([referrerId])
  @@index([status])
  @@map("referrals")
}

