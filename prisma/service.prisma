model ServiceCategory {
  id          String   @id @default(cuid())
  name        String   @unique
  slug        String   @unique
  description String?
  icon        String?
  image       String? // Ссылка на изображение категории
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  services      Service[]
  homePageItems HomePageSectionItem[]

  @@map("service_categories")
}

model Service {
  id          String   @id @default(cuid())
  name        String
  slug        String
  description String?
  price       Float?
  image       String? // Ссылка на изображение услуги
  time        String? // Время выполнения работы (например, "1-2 часа", "1 день")
  categoryId  String
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  category      ServiceCategory       @relation(fields: [categoryId], references: [id], onDelete: Cascade)
  orders        OrderItem[]
  cities        ServiceCity[] // Связь с городами через промежуточную таблицу
  homePageItems HomePageSectionItem[]
  reviews       Review[]

  @@unique([categoryId, slug])
  @@map("services")
}

// Промежуточная таблица для связи услуг с городами (many-to-many)
model ServiceCity {
  id        String   @id @default(cuid())
  serviceId String
  cityId    String
  createdAt DateTime @default(now())

  service Service @relation(fields: [serviceId], references: [id], onDelete: Cascade)
  city    City    @relation(fields: [cityId], references: [id], onDelete: Cascade)

  @@unique([serviceId, cityId]) // Одна услуга может быть в городе только один раз
  @@index([cityId])
  @@index([serviceId])
  @@map("service_cities")
}

